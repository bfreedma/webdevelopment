{% extends "layout.html" %}

{% block title %}
    Book
{% endblock %}

{% block body %}


{% if mess=="no_user" %}

<div class="jumbotron">
  <h1 class="display-4">Woah there!</h1>
  <p class="lead">Please login before you look at book pages.</p>
  <hr class="my-4">
  <p>Click to return to login page where you can login or register a new user.</p>
  <p class="lead">
    <a class="btn btn-primary btn-lg" href="{{ url_for('index')}}" role="button">Login</a>
  </p>
</div>

{% else %}

<br>

<div class="button_example"> <a class="btn btn-primary float-right button_example" href="{{ url_for('index')}}" role=button>Logout</a> </div>
<div class="button_example2"> <a class="btn btn-primary float-left button_example2" href="{{ url_for('search')}}" role=button>Search</a> </div>

<br>
<div class='container bg-light row no-gutters'>
    
    
    <div class='col text-center bg-info'>
        <h1 class='container bg-dark text-white text-center'>{{data.title}} ({{data.year}})</h1>
        <h3 style="color: Black;">By: {{data.author}} </h3>
        <br>
        <h1 style="color: Black;">Rating: {{avg_rating}} </h1>
        <h5 style="color: Black;">Number of Reviews: {{rating_count}} </h5>
        <div class='btn btn-primary button_example2'><a href='/api/{{data.isbn}}' role=button>API</a></div>
        <h4 class="button_example" style="color: Black;">Isbn: {{data.isbn}}</h4>
    </div>
    
</div>
{% if reviews != None %}
{% for review in reviews %}
<div class='container bg-light'>

<style>
.checked {
    color: orange;
}
</style>

{% if review.rating == 1 %}
<span class="fa fa-star checked"></span>
<span class="fa fa-star"></span>
<span class="fa fa-star"></span>
<span class="fa fa-star"></span>
<span class="fa fa-star"></span>

{% endif %}

{% if review.rating == 2 %}
<span class="fa fa-star checked"></span>
<span class="fa fa-star checked"></span>
<span class="fa fa-star"></span>
<span class="fa fa-star"></span>
<span class="fa fa-star"></span>

{% endif %}


{% if review.rating == 3 %}
<span class="fa fa-star checked"></span>
<span class="fa fa-star checked"></span>
<span class="fa fa-star checked"></span>
<span class="fa fa-star"></span>
<span class="fa fa-star"></span>

{% endif %}


{% if review.rating == 4 %}
<span class="fa fa-star checked"></span>
<span class="fa fa-star checked"></span>
<span class="fa fa-star checked"></span>
<span class="fa fa-star checked"></span>
<span class="fa fa-star"></span>

{% endif %}


{% if review.rating == 5 %}
<span class="fa fa-star checked"></span>
<span class="fa fa-star checked"></span>
<span class="fa fa-star checked"></span>
<span class="fa fa-star checked"></span>
<span class="fa fa-star checked"></span>

{% endif %}


    <blockquote class="blockquote">
    <p>{{review.review}}</p>
    <footer style="color: Black;">{{review.username}}</footer>
    </blockquote>
</div>
{% endfor %}
{% endif %}

{% if msg=="second" %}
<div class="alert alert-danger" id="danger" role="alert">
Sorry, you can only submit one review per book.
</div>
{% endif %}

<div class='container bg-light'>
    <form class='form-group float-right'  method="POST">
        <h4 class= 'button_example2'>Please write your review here: </h4>


    <div class="rate button_example">
    <input type="radio" id="star5" name="rate" value="5" />
    <label for="star5" title="text">5 stars</label>
    <input type="radio" id="star4" name="rate" value="4" />
    <label for="star4" title="text">4 stars</label>
    <input type="radio" id="star3" name="rate" value="3" />
    <label for="star3" title="text">3 stars</label>
    <input type="radio" id="star2" name="rate" value="2" />
    <label for="star2" title="text">2 stars</label>
    <input type="radio" id="star1" name="rate" value="1" />
    <label for="star1" title="text">1 star</label>
    </div>



        <textarea class='form-control' name='text'></textarea>

        <button class="btn btn-primary" type="submit">Send review</button>
    </form>
</div>


{% endif %}

{% endblock %}